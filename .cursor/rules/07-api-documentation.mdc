---
description: OpenAPI/Swagger documentation cho REST APIs
globs: **/*Controller.java
alwaysApply: false
---

# API Documentation Standards

## Controller Annotations

```java
@RestController
@RequestMapping("/api/v1/users")
@Tag(name = "Users", description = "User management APIs")
@Slf4j
@RequiredArgsConstructor
public class UserController {

    private final UserService userService;
    
    @Operation(
        summary = "Get user by ID",
        description = "Retrieves a user by their unique identifier"
    )
    @ApiResponses({
        @ApiResponse(
            responseCode = "200",
            description = "User found",
            content = @Content(schema = @Schema(implementation = UserResponseDto.class))
        ),
        @ApiResponse(
            responseCode = "404",
            description = "User not found",
            content = @Content(schema = @Schema(implementation = ErrorResponse.class))
        )
    })
    @GetMapping("/{id}")
    public ResponseEntity<UserResponseDto> getUser(
            @Parameter(description = "User ID", required = true)
            @PathVariable Long id) {
        return ResponseEntity.ok(userService.getUserById(id));
    }
    
    @Operation(summary = "Create new user")
    @ApiResponse(responseCode = "201", description = "User created successfully")
    @PostMapping
    public ResponseEntity<UserResponseDto> createUser(
            @Valid @RequestBody CreateUserRequestDto request) {
        return ResponseEntity
            .status(HttpStatus.CREATED)
            .body(userService.createUser(request));
    }
    
    @Operation(summary = "List users with pagination")
    @GetMapping
    public ResponseEntity<Page<UserResponseDto>> listUsers(
            @Parameter(description = "Page number (0-based)")
            @RequestParam(defaultValue = "0") int page,
            @Parameter(description = "Page size")
            @RequestParam(defaultValue = "20") int size) {
        return ResponseEntity.ok(userService.listUsers(PageRequest.of(page, size)));
    }
}
```

## DTO Annotations

```java
@Data
@Schema(description = "User creation request")
public class CreateUserRequestDto {

    @Schema(description = "User email address", example = "john@example.com")
    @NotBlank(message = "Email is required")
    @Email(message = "Invalid email format")
    private String email;
    
    @Schema(description = "User full name", example = "John Doe")
    @NotBlank(message = "Name is required")
    @Size(min = 2, max = 100)
    private String name;
    
    @Schema(description = "User phone number", example = "+84901234567")
    @Pattern(regexp = "^\\+?[0-9]{10,15}$")
    private String phone;
}

@Data
@Schema(description = "User response")
public class UserResponseDto {

    @Schema(description = "User unique identifier", example = "12345")
    private Long id;
    
    @Schema(description = "User email", example = "john@example.com")
    private String email;
    
    @Schema(description = "User creation timestamp")
    private Instant createdAt;
}
```

## OpenAPI Configuration

```java
@Configuration
public class OpenApiConfig {

    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("VTrip API")
                .version("1.0.0")
                .description("VTrip Microservices API Documentation")
                .contact(new Contact()
                    .name("VTrip Team")
                    .email("tech@vtrip.com")))
            .addSecurityItem(new SecurityRequirement().addList("Bearer"))
            .components(new Components()
                .addSecuritySchemes("Bearer", new SecurityScheme()
                    .type(SecurityScheme.Type.HTTP)
                    .scheme("bearer")
                    .bearerFormat("JWT")));
    }
}
```

## Best Practices

1. **Every endpoint** must have `@Operation` annotation
2. **Response codes** explicitly documented with `@ApiResponse`
3. **DTOs** annotated with `@Schema` for examples
4. **Parameters** have `@Parameter` description
5. **Validation** messages match API documentation
