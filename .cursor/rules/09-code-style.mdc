---
description: Code style conventions for consistent formatting
globs: 
alwaysApply: true
---

# Code Style Standards

## Lombok Import Rules

### CORRECT - Individual Imports
```java
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.RequiredArgsConstructor;
import lombok.Setter;
import lombok.extern.slf4j.Slf4j;
```

### FORBIDDEN - Wildcard Import
```java
// NEVER USE THIS
import lombok.*;
```

---

## Lombok Annotation Patterns

### For DTOs (Request/Response)
```java
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class CreateBookingRequestDto {
```

### For Entities
```java
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Booking {
```

**Note:** Use `@Getter @Setter` for entities (not `@Data`) to avoid issues with JPA proxies and `equals/hashCode`.

### For Services
```java
@Service
@Slf4j
@RequiredArgsConstructor
public class BookingServiceImpl implements BookingService {
```

---

## Import Ordering

Organize imports in this exact order with blank lines between groups:

```java
// 1. Java standard library
import java.math.BigDecimal;
import java.time.Instant;
import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

// 2. Jakarta EE
import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
import jakarta.persistence.Version;
import jakarta.validation.Valid;
import jakarta.validation.constraints.Future;
import jakarta.validation.constraints.NotNull;
import jakarta.validation.constraints.Positive;

// 3. Spring Framework
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

// 4. Hibernate
import org.hibernate.annotations.CreationTimestamp;
import org.hibernate.annotations.UpdateTimestamp;

// 5. MapStruct
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.MappingTarget;
import org.mapstruct.NullValuePropertyMappingStrategy;
import org.mapstruct.ReportingPolicy;

// 6. Swagger/OpenAPI
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.Parameter;
import io.swagger.v3.oas.annotations.responses.ApiResponse;
import io.swagger.v3.oas.annotations.responses.ApiResponses;
import io.swagger.v3.oas.annotations.tags.Tag;

// 7. Lombok (individual imports)
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.RequiredArgsConstructor;
import lombok.Setter;
import lombok.extern.slf4j.Slf4j;

// 8. Project imports (com.vtrip.*)
import com.vtrip.booking.dto.request.CreateBookingRequestDto;
import com.vtrip.booking.dto.response.BookingResponseDto;
import com.vtrip.booking.entity.Booking;
```

---

## Type Preferences

| Use This | Not This | Reason |
|----------|----------|--------|
| `Instant` | `LocalDateTime` | Timezone-safe timestamps |
| `LocalDate` | `Date` | Modern date API |
| `BigDecimal` | `Double/Float` | Precision for money |
| `Long` (wrapper) | `long` (primitive) | Nullable for IDs |
| `var` | explicit type | Cleaner code (Java 10+) |

---

## Naming Conventions

### Classes
| Type | Pattern | Example |
|------|---------|---------|
| Entity | `{Name}` | `Booking` |
| Enum | `{Name}Status` | `BookingStatus` |
| Request DTO | `Create{Name}RequestDto` | `CreateBookingRequestDto` |
| Update DTO | `Update{Name}RequestDto` | `UpdateBookingRequestDto` |
| Response DTO | `{Name}ResponseDto` | `BookingResponseDto` |
| Service Interface | `{Name}Service` | `BookingService` |
| Service Implementation | `{Name}ServiceImpl` | `BookingServiceImpl` |
| Repository | `{Name}Repository` | `BookingRepository` |
| Mapper | `{Name}Mapper` | `BookingMapper` |
| Controller | `{Name}Controller` | `BookingController` |
| Exception | `{Name}Exception` | `NotFoundException` |

### Variables
| Type | Convention | Example |
|------|------------|---------|
| Repository field | `{entity}Repository` | `bookingRepository` |
| Mapper field | `{entity}Mapper` | `bookingMapper` |
| Service field | `{entity}Service` | `bookingService` |
| Entity variable | `entity` or `{entityName}` | `booking` |
| DTO variable | `request` or `dto` | `request` |
| Saved entity | `saved` | `var saved = repository.save(entity)` |

---

## Method Naming

### Service Methods
```java
getById(Long id)           // Single entity lookup
findAll(Pageable pageable) // Paginated list
create(CreateDto request)  // Create new entity
update(Long id, UpdateDto) // Update existing
delete(Long id)            // Delete by ID
```

### Repository Methods
```java
findById(Long id)           // JpaRepository default
findAll(Pageable pageable)  // JpaRepository default
findByStatus(Status status) // Custom query by field
existsById(Long id)         // Check existence
```

---

## Code Formatting

### Line Length
- Maximum 120 characters per line
- Break long method chains at dots
- Break long parameter lists after each parameter

### Braces
```java
// Opening brace on same line
public class Booking {

// Closing brace on own line
}
```

### Method Chaining
```java
// Good - one operation per line
return repository.findById(id)
    .map(mapper::toResponseDto)
    .orElseThrow(() -> NotFoundException.forEntity("Booking", id));

// Bad - everything on one line
return repository.findById(id).map(mapper::toResponseDto).orElseThrow(() -> NotFoundException.forEntity("Booking", id));
```

### Annotations
```java
// Multiple annotations - one per line
@Override
@Transactional(readOnly = true)
public BookingResponseDto getById(Long id) {
```
